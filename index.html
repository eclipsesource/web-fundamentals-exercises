<!DOCTYPE html>
<html>
  <head>
    <title>Exercise 1</title>

    <!-- Example script to show some fun things. However these typically don't occur in practice -->
    <script>
      "use strict";
      // Bonus: "use strict"; should always be used in Javascript files to disallow some old Javascript quirks,
      //   like assigning to global variables when no keyword like 'var', 'let' etc. is used
      // It's automatically applied in type="module" scripts
      const obj = {
        i: 10,
        b: () => console.log(this.i, this),
        c() {
          console.log(this.i, this);
        },
      };
      class C {
        a = 1;
        autoBoundMethod = () => {
          console.log(this.a);
        };
      }
      if (1 == "1") {
        console.log("1 == '1'");
        // We always use triple === to avoid these kind of issues
      }
      function test() {
        for (var i = 0; i < 10; i++) {
          console.log(i);
        }
        console.log("var is available after block scope: " + i);
        // var is not necessary anymore. We only use 'let' and 'const'

        var number = 0 + "";
        console.log(`0 + "" === ${number}`);
        // Typescript makes it easy to spot such occurrences.
        // In general string concatenation is rarely used anymore in favor of template strings.

        return;
        {
          foo: 3;
        }
        // Semicolons can be omitted which can have unexpected consequences, see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Lexical_grammar#automatic_semicolon_insertion
        // We avoid this in practice using formatters like prettier which make all semicolons visible
        // Here you can see it somewhat because of the syntax highlighting.
      }
      console.log(
        `Result of test() is ${test()} because of an automatically appended semicolon after return`
      );
    </script>

    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.21/lodash.min.js"
      integrity="sha512-WFN04846sdKMIP5LKNphMaWzU7YpMyCU245etK3g/2ARYbPK9Ub18eG+ljU96qKRCWh+quCY7yefSmlkQw1ANQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>

    <script type="module">
      import { add } from "./script.js";
      document.getElementById("result").textContent =
        // Bonus: use textContent to avoid security issues
        `The result is ${add(0, "x10", "foo", "foobar")}. It should be 42`;
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
  </head>
  <body>
    <p id="result"></p>
    <p style="color: red" id="lodash-error"></p>
  </body>
  <!-- Script must be placed after the "lodash-error" element as otherwise it's not yet available -->
  <script>
    // parentheses are needed as ! takes precedence, converting !"_" to true.
    if (!("_" in window)) {
      document.getElementById("lodash-error").textContent = // Bonus: use textContent to avoid security issues
        "Lodash is not available. Try again later";
    }
  </script>
  <!-- "module" scripts are executed by default only after all parsing is finished. This is why we don't need to move them down -->
</html>
